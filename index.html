<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Majd's Explorer</title>
    <style>
        .center {
            margin: auto;
            width: 50%;
            padding: 15vh;
            align-self: auto;
        }

        .btn-group button {

            color:black; /* White text */
            padding: 10px 24px; /* Some padding */
            cursor: pointer; /* Pointer/hand icon */
            float: left; /* Float the buttons side by side */
        }

            /* Clear floats (clearfix hack) */
        .btn-group:after {
            content: "";
            clear: both;
            display: table;
        }

        .btn-group button:not(:last-child) {
            border-right: none; /* Prevent double borders */
        }

   


        select:hover {
            color: #444645;
            background: #ddd;
        }


        .text_box {
            border-radius: 25px;
            border: 2px solid #609;
            padding: 20px; 
            width: 200px;
            height: 15px;    
        }


    </style>

</head>

<body>

        <div class="input-group mb-2 center w-100" style="background-color:silver;">

            <div id="logo" style="padding: 7vh; text-align: center; width: 100%; 
            font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif ;">
                <h1> N A V I G A T E </h1>
                <h1 style="width: 100%;">WITH MAJD</h1>
           </div>
            <div class="input-group-prepend"></div>
                <input id="input" type="url" required class="form-control m-4 text_box"
                 style="text-align: center; width: 100%; height: 10vh; 
                 font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
                 font-size:large;" placeholder="Insert URL here, e.g., https://example.com" aria-label="Username" aria-describedby="basic-addon1"
                 autocomplete="on" spellcheck="false" pattern="https://.*" >
    
                <button id="explore" type="button" class="btn btn-success" style="width: 50%; margin-left: 0.6vw;" onclick="redirect()">
                    <div style="text-align: center; font-size: larger;"> <strong>E X P L O R E</strong> </div>
                    <div>(or press Enter)</div>
                </button>
                <button id="clear" type="button" class="btn btn-danger row" style="width: 50%;" onclick="reset()">
                    <div style="font-size: larger;"> <strong> C L E A R </strong></div>
                    <div> (or press Esc.) </div>
                </button>
            </div>



    <script>
        /*
            enable 'ENTER' and 'ESCAPE' keys to work as 'EXPLORE' and 'CLEAR' accordingly.
        */

        // Get the input field
        var input = document.getElementById("input");
        // Execute a function when the user releases a key on the keyboard
        input.addEventListener("keyup", function(event) {
        // Number 13 is the "Enter" key on the keyboard
        if (event.keyCode === 13) {
            // Cancel the default action, if needed
            event.preventDefault();
            // Trigger the button element with a click
            document.getElementById("explore").click();
        }
        // Number 27 is the "Escape" key on the keyboard
        if (event.keyCode === 27) {
            // Cancel the default action, if needed
            event.preventDefault();
            // Trigger the button element with a click
            document.getElementById("clear").click();
        }
        });

        function reset(){
            var resetButton = document.getElementById("input");
            if(resetButton){
                resetButton.value= "";
            }
        }
        function redirect(){
            let url = document.getElementById("input").value;
            let flag1 = false, flag2 = false, flag3=false;
            let hasEnding = false;
            let hasStrating = false;

            if(url == ''){
                flag1=true;
                alert("Please, insert a valid URL") 
                } 

                /*
                    if the user forgot to insert 'https://' or '.com' and the url is valid, 'https://' and '.com' are added automatically.
                    NOTICE: sites which don't end with '.com' will be ignored :: (MVP)   
                */

            if(!validateUrl(url) && !flag1 ){
                flag2 = true;

                if(url.includes(" ")){
                    
                }

                if(!url.includes('.com')){
                    url = url + '.com';
                    hasEnding = true;        
                }
                if(!url.includes('https://')){
                    url = 'https://' + url;
                }
                if(!validateUrl(url)){
                    flag3 = true;
                    reset();
                    alert("URL is invalid!");
                } else {
                    window.open(url, '_blank');
                }
            }
            if(!flag1 && !flag3){
                window.open(url, '_blank');
            }
        }

        //regex to check if the url is valid.
        function validateUrl(value) {
            return /^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(value);
        }

    </script>

<p style="text-align: center; font-family: 'Lucida Sans', 'Lucida Sans Regular',
     'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif; margin-top: 5vh;">
    <strong> &copy; 2019 majdrezik.com </strong>
 </p>

</body>
</html>
